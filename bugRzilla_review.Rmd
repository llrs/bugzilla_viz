---
title: "bugRzilla review"
author: "Piyush Kumar"
date: "04/07/2021"
output: html_document
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

<style>
body {
text-align: justify}
</style>

> # What is bugRzilla?

<font size="4">The project bugRzilla is an issue tracker for the R-core members. The motive to develop this project as many issues came under the Resolution section i.e. not properly documented, reported, spam, and so on. So to find efficiency, issues can be tracked down without much effort which can increase the production rate of R-Core members for solving high-quality issues like whose Severity is major, critical, and new contributors who want to contribute can start either with less Priority and Severity i.e. minor, normal. 
</font>

<font size="3">To learn more, see [bugRzilla](https://github.com/llrs/bugRzilla).</font>

> # Download SQL Data and dumping Data in the SQL Workbench.

```

```


> # Connect bugRzilla SQL Database with R

<font size="4">
To connect bugRzilla SQL Database with R, I've used `dplyr package`, this will allow to interact with our data in the form of quarries.
</font>

```{r, warning = FALSE}
# loading packages
library(dplyr)
library(ggplot2)
library(dbplyr)
library(DBI)
library(tidyverse)
library(lubridate)
library(tibble)
```
```{r, warning = FALSE}
# connecting MySQL with R
con <- dbConnect(
    RMySQL::MySQL(), 
    dbname='bugRzilla',
    username='root',
    password='1204',
    host='localhost',
    port=3306)
#  Accessing Tables names from the Database
src_dbi(con)
```

> # "bugs" table from the SQL Database

```{r, warning = FALSE}
# View the "bugs" tables from the bugRzilla database
bugs_db <- tbl(con, "bugs")
bugs_db %>%
    select(everything())
```

### Data Wrangling on the "bugs" Table
```{r, warning = FALSE}
bugs <- bugs_db %>%
    mutate_all(as.character) %>%  # converting all columns data types to "char"
    as_tibble %>% # must be a data frame for na_if to work
    na_if("") %>% #replace empty strings with NA
    # converting all "char" data types to int leaving the "char" datatype
    mutate_at(vars(-one_of(c("bug_severity", "bug_status", "short_desc",
                             "priority", "rep_platform", "bug_file_loc", 
                             "lastdiffed", "op_sys", "version", 
                             "resolution", "target_milestone", "creation_ts", 
                             "delta_ts", "status_whiteboard"))), as.integer) %>%
    # converting all columns data types to "Date" leaving the "char" and "int" datatype
    mutate_at(vars(-one_of(c("bug_severity", "bug_status", "short_desc",
                          "bug_file_loc", "priority", "rep_platform", 
                          "version", "resolution", "target_milestone", 
                          "bug_id", "assigned_to", "op_sys", 
                          "status_whiteboard", "product_id", "reporter", 
                          "component_id", "qa_contact", "votes",
                          "everconfirmed", "reporter_accessible",
                          "cclist_accessible", "estimated_time",
                          "remaining_time"))), as.Date)

head(bugs)
```

> #"attachments" table from the SQL Database

```{r, warning = FALSE}
# View the "attachments" Table from the database
attachments_db <- tbl(con, "attachments")
attachments_db %>%
    select(everything())
```

### Data Wrangling on "attachments" Table 
```{r, warning = FALSE}
# Data Wrangling
attach_df <- attachments_db %>%
    as_tibble %>% # must be a data frame for na_if to work
    na_if("") %>% #replace empty strings with NA
    # converting all columns data types to "Date" leaving the "char" and "int" datatype
    mutate_at(vars(-one_of(c("attach_id", "bug_id", "description", "mimetype", 
                             "ispatch", "filename", "submitter_id", 
                             "isobsolete", "isprivate"))), as.Date)

head(attach_df)
```

> #"bugs_activity" table from the SQL Database

```{r, warning = FALSE}
# View the "bugs_activity" Table from the database
bugs_activity_db <- tbl(con, "bugs_activity")
bugs_activity_db %>%
    select(everything())
```

### Data Wrangling on "bugs_activity" Table 
```{r, warning = FALSE}
# Data Wrangling
bugs_act <- bugs_activity_db %>%
    as_tibble %>% # must be a data frame for na_if to work
    na_if("") %>% #replace empty strings with NA
    mutate_at(vars(-one_of(c("attach_id", "bug_id", "who", "fieldid", "added", "comment_id", "removed", "id"))), as.Date)

head(bugs_act)
```
